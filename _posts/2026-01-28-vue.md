---
layout: post
title: Vueå‰ç«¯å¼€å‘â€”â€”ä»å…¥é—¨åˆ°æ”¾å¼ƒ
date: 2026-01-28 17:20
mathjax: false
disqus: true
pannellum: flase
categories: Development
---

> simple is best

æœ€è¿‘å¼€å§‹è¯•ç€å­¦ä¹ vueæ¥å¼€å‘å‰ç«¯é¡µé¢ï¼Œå› ä¸ºä¹‹å‰çš„flaredriveç½‘ç›˜é¡¹ç›®ä¸­å°±æ˜¯ç”¨vueå‰ç«¯ï¼Œæ‰€ä»¥å¯¹ä¸€äº›é¡µé¢çŠ¶æ€ä¿®æ”¹è¿˜æ˜¯æœ‰æ‰€äº†è§£ã€‚è¿™æ¬¡å¼€å‘çš„é¡µé¢ä¹Ÿå¾ˆç®€å•ï¼Œæœ‰ä¸€ä¸ªè¡¨å•ï¼Œæäº¤åè¿›å…¥ä¸€ä¸ªç€‘å¸ƒæµæ˜¾ç¤ºï¼Œæ¯ä¸€æ­¥è¿è¡Œéƒ½æœ‰çŠ¶æ€æ˜¾ç¤ºï¼Œè¿è¡Œå®Œæˆåå°±å°†èƒŒæ™¯å˜æˆè“è‰²å·²å®Œæˆï¼Œå¹¶ä¸”æ›´æ”¹æ­¥éª¤çš„æè¿°ã€‚äºæ˜¯æˆ‘æŠŠéœ€æ±‚æè¿°æ‰”ç»™Deepseekå’Œchatgptï¼Œè®©å®ƒä»¬å¸®å¿™å®ç°ã€‚è™½ç„¶ä¸­é—´æœ‰ä¸€äº›é—®é¢˜éœ€è¦è‡ªå·±æ…¢æ…¢æ›´æ”¹ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯å¯ä»¥ç”¨çš„ã€‚ç”šè‡³å¯ä»¥ç›´æ¥è®©å®ƒä»¬å¸®ä½ è®¾è®¡SVGå›¾æ ‡ã€‚

### åˆ›å»ºé¡¹ç›®
å› ä¸ºæˆ‘æƒ³æŠŠé¡µé¢æœ€ç»ˆæ‰˜ç®¡åˆ°cloudflareä¸Šï¼Œæ‰€ä»¥å¯ä»¥ç”¨wrangleræ„å»ºã€‚é¦–å…ˆå®‰è£…ä¾èµ–

```bash
npm install -g wrangler
wrangler init my-worker-vue
cd my-worker-vue
```

åˆ›å»ºæ—¶é€‰æ‹©typescriptå’Œvueï¼Œç„¶åå°±ä¼šè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶å’Œç›®å½•ã€‚å…¶ä¸­åŒ…å«ä¸€ä¸ª`server/index.ts`æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```typescript
export default {
	fetch(request) {
		const url = new URL(request.url);

		if (url.pathname.startsWith("/api/")) {
			return Response.json({
				name: "Cloudflare",
			});
		}
		return new Response(null, { status: 404 });
	},
} satisfies ExportedHandler<Env>;
```

å®šä¹‰äº†å¼‚æ­¥è¯·æ±‚çš„ç›¸åº”ï¼Œåœ¨è®¿é—®`/api/`è·¯å¾„æ—¶ä¼šè¿”å›ä¸€ä¸ªjsonçš„å¯¹è±¡ã€‚å…¶å®ƒé™æ€èµ„æºè¿”å›ï¼ˆVue é¡µé¢ï¼‰åœ¨`main.ts`å’Œ`router/index.ts`ä¸­å®šä¹‰ã€‚ä¸€äº›vueæ–‡ä»¶ä¸­å¯ä»¥å¯¼å…¥å…¶ä»–vueæ–‡ä»¶ä½œä¸ºè¯¥é¡µé¢çš„ä¸€ä¸ªç»„ä»¶ã€‚

### é¡µé¢è·³è½¬

å› ä¸ºé¡µé¢è®¾è®¡ä¸­åŒ…å«ä¸€ä¸ªå¸¦å‚æ•°çš„è·³è½¬ï¼Œè¿™é‡Œç®€å•æ€»ç»“ä¸€ä¸‹useRouterçš„ç”¨æ³•ã€‚
##### å‘èµ·è¯·æ±‚
é¦–å…ˆæ˜¯ä¾èµ–å¯¼å…¥ï¼š

```typescript
import { useRouter } from 'vue-router'

const router = useRouter()
```

ç„¶ååœ¨éœ€è¦æäº¤çš„åœ°æ–¹è°ƒç”¨å’Œæäº¤å‚æ•°ï¼š

```typescript
router.push({
  path: '/token',
  query: { key:value }
})
```

å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚é¡µé¢å…ƒç´ å’Œæ–‡æœ¬æ¡†è¾“å…¥è·å–æ¯”è¾ƒç®€å•ï¼Œä¸èµ˜è¿°ã€‚

##### ç›®æ ‡é¡µé¢å¤„ç†
ç›®æ ‡é¡µé¢`/token`è·å–åˆ°è¯·æ±‚å’Œå‚æ•°åï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç è¿›è¡Œå¤„ç†
```typescript
<script setup lang="ts">
import { useRoute } from 'vue-router'

const route = useRoute()

const value = route.query[key]

console.log('value:', value)
</script>
```

### templateå’Œslot
> ä¸€å¥è¯ï¼Œ\<template\> æ˜¯ â€œä¸ä¼šè¢«æ¸²æŸ“æˆ DOM çš„ç»“æ„å®¹å™¨â€ã€‚å®ƒæœ¬èº«ä¸æ˜¾ç¤ºï¼Œåªæ˜¯ç”¨æ¥åŒ…ä½ç»“æ„æˆ–å†…å®¹ã€‚
>
> Slot æ˜¯ çˆ¶ç»„ä»¶â€œå¾€å­ç»„ä»¶æŒ‡å®šä½ç½®å¡å†…å®¹â€çš„æœºåˆ¶ã€‚
>
> âŒ è¯¯åŒºï¼šä¸èƒ½â€œç›´æ¥æ“ä½œ slot DOMâ€
>
> åŸå› ï¼š
> + Slot å†…å®¹å±äº çˆ¶ç»„ä»¶
> + å­ç»„ä»¶ä¸èƒ½ç›´æ¥æ”¹

### refå˜é‡å’ŒdefinePropsæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
ä¸ºäº†åœ¨æäº¤åçš„ç€‘å¸ƒæµä¸­æ›´æ”¹å„ä¸ªçŠ¶æ€çš„æè¿°ï¼Œæˆ‘éœ€è¦ç”¨refå˜é‡æ¥å­˜å‚¨å’Œä¿®æ”¹ã€‚

> | å¯¹æ¯”ç‚¹  | `ref`         | `defineProps`   |
> | ---- | ------------- | --------------- |
> | å±äºè°  | **å½“å‰ç»„ä»¶è‡ªå·±çš„çŠ¶æ€** | **çˆ¶ç»„ä»¶ä¼ è¿›æ¥çš„åªè¯»æ•°æ®** |
> | èƒ½ä¸èƒ½æ”¹ | âœ… å¯ä»¥          | âŒ ä¸èƒ½ï¼ˆåªè¯»ï¼‰        |
> | ç”¨é€”   | çŠ¶æ€ã€äº¤äº’ã€å“åº”å¼é€»è¾‘   | æ¥æ”¶å¤–éƒ¨é…ç½®          |
> | æ•°æ®æµ  | ç»„ä»¶å†…éƒ¨          | çˆ¶ â†’ å­ï¼ˆå•å‘ï¼‰       |

æœ€ç»ˆå®ç°çš„æ–¹æ¡ˆå¦‚ä¸‹ï¼š

```typescript
...
const description = ref('Create a Solana wallet, private key:')
...

// éœ€è¦ä¿®æ”¹æ—¶
description.value = "Creating token..."
...

// åˆå§‹çŠ¶æ€
<WelcomeItem  :isActive="isActive(2)"
    :isCompleted="isDone(2)">
    <template #icon>
        <TokenIcon />
    </template>
    <template #heading>Token</template>
    <p class="break-text" v-html="description"></p>
</WelcomeItem>
```

**è¿™é‡Œç”¨`v-html`å¯ä»¥ä½¿`description`èƒ½æ¸²æŸ“htmlå…ƒç´ **ã€‚

### è‡ªåŠ¨æ¢è¡Œ
ä½¿ç”¨cssæ ·å¼æ¥å®ç°ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š
```css
.break-key {
  word-break: break-all;        /* å¼ºåˆ¶ä»»æ„å­—ç¬¦æ¢è¡Œ */
  overflow-wrap: anywhere;     /* ç°ä»£æµè§ˆå™¨æ¨è */
  white-space: normal;
}
```

###  âŒ ä¸è¦åœ¨ setup é¡¶å±‚ await

å…¸å‹æŠ¥é”™ï¼š
```
Component <TheWelcome>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered. 
```
éœ€è¦å°†awaitéƒ¨åˆ†æ”¾è¿›å¼‚æ­¥å‡½æ•°ä¸­ï¼Œæˆ–è€…æ”¾è¿›`onMounted`ï¼Œå¦‚ä¸‹ï¼š
```typescript
<script setup lang="ts">
import { onMounted } from 'vue'
import { Connection } from '@solana/web3.js'

const connection = new Connection('https://api.devnet.solana.com')

onMounted(async () => {
  const sig = await connection.requestAirdrop(pubkey, 1e9)
  await connection.confirmTransaction(sig)
})
</script>
```
> **ğŸ§  ä¸ºä»€ä¹ˆ Vue è¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ**
>
> Vue çš„ç†å¿µæ˜¯ï¼š
>
> setup åº”è¯¥æ˜¯â€œåŒæ­¥åœ°å»ºç«‹å“åº”å¼å…³ç³»â€ï¼Œè€Œä¸æ˜¯åš IOã€‚
>
> æ‰€ä»¥ï¼š
>
> é¡¶å±‚ await = IO é˜»å¡æ¸²æŸ“ã€‚Vue å¼ºåˆ¶ä½ ç”¨ \<Suspense\> æ‰¿æ‹…è¿™ä¸ªçŠ¶æ€ã€‚

### æµè§ˆå™¨ç¯å¢ƒæŠ¥é”™å¤„ç†

æŠ¥é”™å†…å®¹å¦‚ä¸‹ï¼š
```
Uncaught ReferenceError: global is not defined
    at index.mjs:657:16
```
> ##### ä¸€ã€ä¸ºä»€ä¹ˆä¼šæŠ¥è¿™ä¸ªé”™ï¼Ÿ
> åŸå› åªæœ‰ä¸€ä¸ªï¼š
>
> ä½ åœ¨æµè§ˆå™¨ç¯å¢ƒï¼ˆViteï¼‰é‡Œç”¨äº†â€œé»˜è®¤å‡è®¾ Node.js ç¯å¢ƒâ€çš„åº“
> è€Œè¿™äº›åº“é‡Œå†™äº†ç±»ä¼¼ï¼š
> ```typescript
> global.Buffer
> global.process
> ```
> ä½†â€”â€”
>
> ğŸ‘‰ æµè§ˆå™¨é‡Œæ²¡æœ‰ globalï¼Œåªæœ‰ window / globalThis

> ##### äºŒã€æœ€ç»ˆè§£å†³æ–¹æ¡ˆ
> ä½ å¯ä»¥ä¸ºæµè§ˆå™¨ç¯å¢ƒæä¾› stream æ¨¡å—çš„ polyfillã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ stream-browserify ä½œä¸ºæµè§ˆå™¨çš„ polyfillã€‚